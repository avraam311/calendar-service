# Calendar service

## Обзор

Сервис для добавления и получения событий.
Стэк: Golang, Chi, Docker, PostgreSQL.

## Endpoints

- **POST /create_event** — создание нового события  
- **POST /update_event** — обновление существующего события  
- **POST /delete_event** — удаление события  
- **GET /events_for_day** — получить все события на указанный день  
- **GET /events_for_week** — получить все события на указанную неделю  
- **GET /events_for_month** — получить все события на указанный месяц

## Формат запросов

Для запросов создания данные передаются в теле запроса в формате:
- JSON (`application/json`)

Для запросов обновления данные передаются в теле запроса в формате:
- JSON (`application/json`)

Для запросов удаления данные передаются в теле запроса в формате:
- JSON (`application/json`)

Для запросов получения данные передаются в теле запроса в формате:
- JSON (`application/json`)
Однако дата указывается в query string:

Формат даты для всех запросов такой
`yyyy-MM-ddTHH:mm:ssZ`

При get-запросах данные будет получены в диапазоне ?date=yyyy-MM-ddTHH:mm:ssZ + 24 hours для метода events_for_day, ?date=yyyy-MM-ddTHH:mm:ssZ + 24 hours * 7 для метода events_for_week и т.д.

Обязательные поля для создания события:

- `user_id` — идентификатор пользователя (целое число)  
- `date` — дата события в формате `yyyy-MM-ddTHH:mm:ssZ`  
- `event` — текстовое описание события

## Логирование

Все запросы логируются в файле logs/md_logs.log
Все остальное логируются в файле logs/logs.log

## Тестирование

Написаны юнит тесты для всех методов repository, service и api.
Для запуска тестов нужно в корне программым написать:

```
make test
```

## Запуск

### 1. Сканируйте репозиторий

```bash
git clone https://github.com/avraam311/calendar-service
cd order-service
```

### 2. Создайте `.env` файл

Скопируйте шаблонный файл .env.example и заполните его нужными данными:

```bash
cp .env.example .env
```

Редактируйте `.env` как нужно.

### 3. Запуск проекта через docker-compose

Чтобы собрать и запустить проект

```bash
make up
```

### 4 Доступ к странице

Доступ к api:

```
http://localhost:8080
```

## Примечания

* Убедитесь, что Docker и docker-compose установлены на вашей ос
* `.env` файл настроен правильно.
* Напишите "make down", чтобы остановить работу системы
* Реализовано middleware для логирования всех запросов в файл md_logs.logs